<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX</title>
  </head>

  <body>
    <input type="text" name="country" id="country" placeholder="Enter the Country name">
    <button onclick=showCountries()>Show Countries</button>
    <div id="feed">

    </div>
  </body>

  <script>
    function showCountries(){
        let xhr = new XMLHttpRequest();
        const countryName = document.getElementById("country").value;

        // Initiallize the request
        xhr.open('GET', `https://restcountries.com/v3.1/name/${countryName}`, true);
        
        // sending the request
        xhr.send()


        // fetching data
        xhr.onload = function(){
            if (xhr.status == 200){
                console.log('success');
                let countries = JSON.parse(this.response);

                feed.innerHTML = `<h1> ${countries[0].name.common} </h1> <img src=${countries[0].flags.png} />`;
            }
            else{
                feed.innerHTML = "<h2> Record Not Found! </h2>";
            }
        }
        
    }
  </script>
</html>
